# 🏛️ АРХИТЕКТУРНАЯ СХЕМА ПРОЕКТА

## 📐 ОБЩАЯ АРХИТЕКТУРА

```
┌─────────────────────────────────────────────────────────────┐
│                    NEXT.JS 14 APP ROUTER                    │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │   CLIENT    │  │   SERVER    │  │    API      │         │
│  │ COMPONENTS  │  │ COMPONENTS  │  │  ROUTES     │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
├─────────────────────────────────────────────────────────────┤
│                    FIREBASE BACKEND                         │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │    AUTH     │  │  FIRESTORE  │  │   STORAGE   │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
└─────────────────────────────────────────────────────────────┘
```

## 🗂️ СТРУКТУРА ФАЙЛОВ

```
workincz-site/
├── src/                          # ИСХОДНЫЙ КОД
│   ├── app/                      # Next.js App Router
│   │   ├── api/                  # API маршруты
│   │   │   ├── auth/             # Аутентификация
│   │   │   ├── jobs/             # Управление вакансиями
│   │   │   ├── user/             # Пользователи
│   │   │   └── dashboard/        # Дашборд
│   │   ├── auth/                 # Страницы аутентификации
│   │   │   ├── signin/           # Вход
│   │   │   └── signup/           # Регистрация
│   │   ├── dashboard/            # Дашборд пользователя
│   │   ├── jobs/                 # Управление вакансиями
│   │   │   └── create/           # Создание вакансии
│   │   ├── profile/              # Профиль пользователя
│   │   ├── globals.css           # ЕДИНСТВЕННЫЙ CSS файл
│   │   ├── layout.tsx            # Корневой layout
│   │   └── page.tsx              # Главная страница
│   ├── components/               # React компоненты
│   │   ├── ui/                   # Базовые UI компоненты
│   │   │   ├── badge.tsx         # Бейджи
│   │   │   ├── button.tsx        # Кнопки
│   │   │   └── card.tsx          # Карточки
│   │   ├── auth/                 # Компоненты аутентификации
│   │   │   ├── auth-provider.tsx # Провайдер аутентификации
│   │   │   ├── conditional-cta.tsx # Условные CTA
│   │   │   └── role-switcher.tsx # Переключатель ролей
│   │   ├── dashboard/            # Компоненты дашборда
│   │   │   ├── dashboard-stats.tsx # Статистика
│   │   │   ├── quick-actions.tsx # Быстрые действия
│   │   │   └── recent-jobs.tsx   # Последние вакансии
│   │   ├── forms/                # Формы
│   │   ├── jobs/                 # Компоненты вакансий
│   │   │   ├── job-create-form.tsx # Форма создания
│   │   │   └── jobs-list.tsx     # Список вакансий
│   │   ├── layout/               # Компоненты макета
│   │   ├── notifications/        # Уведомления
│   │   │   └── notification-bell.tsx # Колокольчик
│   │   └── profile/              # Профиль
│   │       ├── profile-form.tsx  # Форма профиля
│   │       └── profile-stats.tsx # Статистика профиля
│   ├── hooks/                    # React хуки
│   │   ├── useApplications.ts    # Управление заявками
│   │   ├── useAuth.ts            # Аутентификация
│   │   ├── useDashboard.ts       # Дашборд
│   │   └── useJobs.ts            # Вакансии
│   ├── lib/                      # Утилиты и конфигурации
│   │   ├── auth.ts               # Аутентификация
│   │   ├── firebase.ts           # ЕДИНСТВЕННАЯ конфигурация Firebase
│   │   ├── services/             # Сервисы
│   │   │   ├── api.ts            # API клиент
│   │   │   ├── auth.ts           # Сервис аутентификации
│   │   │   ├── jobs.ts           # Сервис вакансий
│   │   │   └── user.ts           # Сервис пользователей
│   │   └── utils.ts              # Общие утилиты
│   ├── middleware.ts             # Next.js middleware
│   ├── modules/                  # СТАРЫЕ JS МОДУЛИ (К УДАЛЕНИЮ)
│   │   ├── analytics/            # Аналитика
│   │   ├── auth/                 # Аутентификация
│   │   ├── jobs/                 # Вакансии
│   │   ├── messaging/            # Сообщения
│   │   └── payments/             # Платежи
│   ├── services/                 # Сервисы
│   │   ├── api/                  # API сервисы
│   │   ├── firebase/             # Firebase сервисы
│   │   └── storage/              # Хранилище
│   ├── types/                    # TypeScript типы
│   │   ├── auth.ts               # Типы аутентификации
│   │   └── index.ts              # Общие типы
│   └── utils/                    # Утилиты
│       ├── constants/            # Константы
│       ├── helpers/              # Помощники
│       └── validation/           # Валидация
├── public/                       # СТАТИЧЕСКИЕ ФАЙЛЫ
│   ├── _headers                  # Заголовки для хостинга
│   ├── _redirects                # Перенаправления
│   ├── 404.html                  # Страница 404
│   ├── auth/                     # СТАРЫЕ HTML СТРАНИЦЫ (К МИГРАЦИИ)
│   │   ├── confirm.html          # Подтверждение
│   │   ├── login.html            # Вход
│   │   └── register.html         # Регистрация
│   ├── js/                       # СТАРЫЕ JS ФАЙЛЫ (К УДАЛЕНИЮ)
│   │   ├── ab-testing.js         # A/B тестирование
│   │   ├── agency-candidate-manager.js # Управление кандидатами
│   │   ├── analytics-dashboard.js # Дашборд аналитики
│   │   ├── auth/                 # Аутентификация
│   │   ├── components/           # Компоненты
│   │   ├── core/                 # Ядро
│   │   ├── dashboard/            # Дашборд
│   │   ├── features/             # Функции
│   │   ├── modules/              # Модули
│   │   └── utils/                # Утилиты
│   └── [другие статические файлы]
├── tests/                        # ТЕСТЫ
│   └── auth.test.js              # Тесты аутентификации
├── configs/                      # КОНФИГУРАЦИИ
├── docs/                         # ДОКУМЕНТАЦИЯ
├── scripts/                      # СКРИПТЫ
├── servers/                      # СЕРВЕРНЫЕ СКРИПТЫ
├── workflows-templates/          # ШАБЛОНЫ CI/CD
├── .eslintrc.js                  # ESLint конфигурация
├── .prettierrc                   # Prettier конфигурация
├── next.config.js                # Next.js конфигурация
├── package.json                  # Зависимости и скрипты
├── tailwind.config.js            # Tailwind CSS конфигурация
├── tsconfig.json                 # TypeScript конфигурация
├── webpack.config.js             # Webpack конфигурация
├── PROJECT_KNOWLEDGE.md          # База знаний проекта
├── PROJECT_RULES.md              # Правила организации
└── ARCHITECTURE.md               # Этот файл
```

## 🔄 ПОТОКИ ДАННЫХ

### 1. АУТЕНТИФИКАЦИЯ
```
Пользователь → Компонент входа → API /api/auth/signin → Firebase Auth → Состояние приложения
```

### 2. УПРАВЛЕНИЕ ВАКАНСИЯМИ
```
Пользователь → Форма создания → API /api/jobs/create → Firestore → Обновление UI
```

### 3. ДАШБОРД
```
Пользователь → Страница дашборда → API /api/dashboard → Firestore → Отображение данных
```

## 🎯 ПРИНЦИПЫ АРХИТЕКТУРЫ

### 1. РАЗДЕЛЕНИЕ ОТВЕТСТВЕННОСТИ
- **UI Layer**: React компоненты
- **Business Logic**: React хуки и сервисы
- **Data Layer**: Firebase + API маршруты
- **Configuration**: Единые конфигурации в `src/lib/`

### 2. ТИПИЗАЦИЯ
- **Строгая типизация**: Все компоненты и функции типизированы
- **Единые типы**: Все типы в `src/types/`
- **Валидация**: Zod для API и форм

### 3. ПРОИЗВОДИТЕЛЬНОСТЬ
- **Server Components**: По умолчанию
- **Client Components**: Только при необходимости
- **Code Splitting**: Автоматическое разделение кода
- **Caching**: Next.js кэширование

### 4. БЕЗОПАСНОСТЬ
- **Middleware**: Защита маршрутов
- **Validation**: Валидация всех входных данных
- **Authentication**: Firebase Auth
- **Authorization**: Роли и права доступа

## 🚨 КРИТИЧЕСКИЕ ЗОНЫ

### 1. СТАРЫЕ МОДУЛИ (К УДАЛЕНИЮ)
```
src/modules/          # Старые JS модули
public/js/            # Старые JS файлы
public/auth/          # Старые HTML страницы
```

### 2. ДУБЛИРОВАНИЯ (К УНИФИКАЦИИ)
```
Конфигурации Firebase
CSS файлы
Типы данных
```

### 3. СМЕШАННАЯ АРХИТЕКТУРА (К ИСПРАВЛЕНИЮ)
```
Next.js + Старые JS модули
React + Vanilla JS
TypeScript + JavaScript
```

## 📈 ПЛАН МИГРАЦИИ

### ЭТАП 3: МИГРАЦИЯ МОДУЛЕЙ (В ПРОЦЕССЕ)
1. ✅ AuthManager → React хуки + API маршруты
2. 🔄 JobsManager → React хуки + API маршруты
3. ⏳ MessagingManager → React хуки + API маршруты
4. ⏳ Статические страницы → Next.js страницы

### ЭТАП 4: ОПТИМИЗАЦИЯ (ПЛАНИРУЕТСЯ)
1. Производительность
2. SEO и доступность
3. Тестирование
4. Мониторинг

---

**ПОСЛЕДНЕЕ ОБНОВЛЕНИЕ**: 30.07.2025  
**СТАТУС**: АКТИВНАЯ РАЗРАБОТКА  
**СЛЕДУЮЩИЙ ЭТАП**: Завершение миграции модулей 