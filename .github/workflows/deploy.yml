# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π WorkInCZ –Ω–∞ Firebase Hosting
name: Deploy to Firebase Hosting

# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ push –≤ main branch
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    # 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
    - name: üì• Checkout code
      uses: actions/checkout@v4
      
    # 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js
    - name: üü¢ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    # 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Firebase CLI
    - name: üî• Install Firebase CLI
      run: npm install -g firebase-tools
      
    # 4. –î–µ–ø–ª–æ–∏–º –Ω–∞ Firebase Hosting
    - name: üöÄ Deploy to Firebase
      run: firebase deploy --only hosting --token ${{ secrets.FIREBASE_TOKEN }}
      env:
        FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}
        
    # 5. –£–≤–µ–¥–æ–º–ª—è–µ–º –æ–± —É—Å–ø–µ—à–Ω–æ–º –¥–µ–ø–ª–æ–µ
    - name: ‚úÖ Success notification
      if: success()
      run: |
        echo "üéâ –î–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!"
        echo "üåê –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω: https://workincz-759c7.web.app"
        
    # 6. –£–≤–µ–¥–æ–º–ª—è–µ–º –æ–± –æ—à–∏–±–∫–µ
    - name: ‚ùå Error notification  
      if: failure()
      run: |
        echo "üí• –û—à–∏–±–∫–∞ –¥–µ–ø–ª–æ—è! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏." 