<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç - WorkInCZ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase -->
    <script src="js/firebase-app-compat.js"></script>
    <script src="js/firebase-auth-compat.js"></script>
    <script src="js/firebase-firestore-compat.js"></script>
    
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="js/auth-manager.js"></script>
    <script src="js/jobs-manager.js"></script>
    <script src="js/demo-login-system.js"></script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .primary { color: #4F46E5; }
        .secondary { color: #F59E0B; }
        .success { color: #10B981; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-8">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-900 mb-2">üß™ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç</h1>
                <p class="text-gray-600">–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</p>
            </div>
            
            <!-- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º -->
            <div class="space-y-4 mb-8">
                <div id="firebaseStatus" class="p-3 rounded-lg border">
                    <h3 class="font-medium mb-2">Firebase</h3>
                    <p class="text-sm text-gray-600">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</p>
                </div>
                
                <div id="authStatus" class="p-3 rounded-lg border">
                    <h3 class="font-medium mb-2">Auth Manager</h3>
                    <p class="text-sm text-gray-600">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</p>
                </div>
                
                <div id="jobsStatus" class="p-3 rounded-lg border">
                    <h3 class="font-medium mb-2">Jobs Manager</h3>
                    <p class="text-sm text-gray-600">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</p>
                </div>
                
                <div id="demoStatus" class="p-3 rounded-lg border">
                    <h3 class="font-medium mb-2">Demo Login</h3>
                    <p class="text-sm text-gray-600">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</p>
                </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
            <div class="space-y-3">
                <button id="testDemoLogin" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors">
                    üöÄ –¢–µ—Å—Ç Demo-–≤—Ö–æ–¥–∞
                </button>
                
                <button id="testJobs" class="w-full bg-secondary text-white py-3 rounded-lg font-medium hover:bg-secondary/90 transition-colors">
                    üìã –¢–µ—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–π
                </button>
                
                <button id="testAuth" class="w-full bg-success text-white py-3 rounded-lg font-medium hover:bg-success/90 transition-colors">
                    üîê –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                </button>
            </div>
            
            <!-- –õ–æ–≥ -->
            <div class="mt-8 p-4 bg-gray-100 rounded-lg">
                <h3 class="font-medium mb-2">–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π:</h3>
                <div id="eventLog" class="text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    <div>–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const firebaseConfig = {
            apiKey: "AIzaSyAo34JvPwyqjwzjhd-d-qEKh7HqAAWsIiM",
            authDomain: "workincz-759c7.firebaseapp.com",
            projectId: "workincz-759c7",
            storageBucket: "workincz-759c7.appspot.com",
            messagingSenderId: "670842817143",
            appId: "1:670842817143:web:d8998634da78318e9f1472",
            databaseURL: "https://workincz-759c7-default-rtdb.europe-west1.firebasedatabase.app"
        };

        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message, type = 'info') {
            const logDiv = document.getElementById('eventLog');
            const time = new Date().toLocaleTimeString();
            const color = type === 'error' ? 'text-red-600' : type === 'success' ? 'text-green-600' : 'text-gray-700';
            logDiv.innerHTML += `<div class="${color}">[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ Firebase
        function checkFirebase() {
            const statusDiv = document.getElementById('firebaseStatus');
            try {
                if (typeof firebase !== 'undefined') {
                    firebase.initializeApp(firebaseConfig);
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Firebase</h3>
                        <p class="text-sm text-green-600">‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω</p>
                    `;
                    log('Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'success');
                    return true;
                } else {
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Firebase</h3>
                        <p class="text-sm text-red-600">‚ùå –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω</p>
                    `;
                    log('Firebase –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
                    return false;
                }
            } catch (error) {
                statusDiv.innerHTML = `
                    <h3 class="font-medium mb-2">Firebase</h3>
                    <p class="text-sm text-red-600">‚ùå –û—à–∏–±–∫–∞: ${error.message}</p>
                `;
                log(`–û—à–∏–±–∫–∞ Firebase: ${error.message}`, 'error');
                return false;
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ Auth Manager
        function checkAuthManager() {
            const statusDiv = document.getElementById('authStatus');
            try {
                if (window.authManager) {
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Auth Manager</h3>
                        <p class="text-sm text-green-600">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç</p>
                    `;
                    log('Auth Manager —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    return true;
                } else {
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Auth Manager</h3>
                        <p class="text-sm text-red-600">‚ùå –ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω</p>
                    `;
                    log('Auth Manager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error');
                    return false;
                }
            } catch (error) {
                statusDiv.innerHTML = `
                    <h3 class="font-medium mb-2">Auth Manager</h3>
                    <p class="text-sm text-red-600">‚ùå –û—à–∏–±–∫–∞: ${error.message}</p>
                `;
                log(`–û—à–∏–±–∫–∞ Auth Manager: ${error.message}`, 'error');
                return false;
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ Jobs Manager
        function checkJobsManager() {
            const statusDiv = document.getElementById('jobsStatus');
            try {
                if (window.jobsManager) {
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Jobs Manager</h3>
                        <p class="text-sm text-green-600">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç</p>
                    `;
                    log('Jobs Manager —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    return true;
                } else {
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Jobs Manager</h3>
                        <p class="text-sm text-red-600">‚ùå –ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω</p>
                    `;
                    log('Jobs Manager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error');
                    return false;
                }
            } catch (error) {
                statusDiv.innerHTML = `
                    <h3 class="font-medium mb-2">Jobs Manager</h3>
                    <p class="text-sm text-red-600">‚ùå –û—à–∏–±–∫–∞: ${error.message}</p>
                `;
                log(`–û—à–∏–±–∫–∞ Jobs Manager: ${error.message}`, 'error');
                return false;
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ Demo Login
        function checkDemoLogin() {
            const statusDiv = document.getElementById('demoStatus');
            try {
                if (window.demoLoginSystem) {
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Demo Login</h3>
                        <p class="text-sm text-green-600">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç</p>
                    `;
                    log('Demo Login —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    return true;
                } else {
                    statusDiv.innerHTML = `
                        <h3 class="font-medium mb-2">Demo Login</h3>
                        <p class="text-sm text-red-600">‚ùå –ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω</p>
                    `;
                    log('Demo Login –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error');
                    return false;
                }
            } catch (error) {
                statusDiv.innerHTML = `
                    <h3 class="font-medium mb-2">Demo Login</h3>
                    <p class="text-sm text-red-600">‚ùå –û—à–∏–±–∫–∞: ${error.message}</p>
                `;
                log(`–û—à–∏–±–∫–∞ Demo Login: ${error.message}`, 'error');
                return false;
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', async () => {
            log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º Firebase
            if (checkFirebase()) {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—ã
                try {
                    window.authManager = new AuthManager();
                    window.jobsManager = new JobsManager();
                    window.demoLoginSystem = new DemoLoginSystem();
                    
                    // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º
                    setTimeout(() => {
                        checkAuthManager();
                        checkJobsManager();
                        checkDemoLogin();
                    }, 1000);
                    
                } catch (error) {
                    log(`–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, 'error');
                }
            }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
        document.getElementById('testDemoLogin').addEventListener('click', () => {
            if (window.demoLoginSystem) {
                log('–û—Ç–∫—Ä—ã–≤–∞—é Demo –º–æ–¥–∞–ª...');
                window.demoLoginSystem.showDemoLoginModal();
            } else {
                log('Demo Login –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
            }
        });

        document.getElementById('testJobs').addEventListener('click', async () => {
            if (window.jobsManager) {
                log('–ó–∞–≥—Ä—É–∂–∞—é –≤–∞–∫–∞–Ω—Å–∏–∏...');
                const jobs = await window.jobsManager.loadJobs();
                log(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${jobs.length} –≤–∞–∫–∞–Ω—Å–∏–π`, 'success');
            } else {
                log('Jobs Manager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
            }
        });

        document.getElementById('testAuth').addEventListener('click', () => {
            if (window.authManager) {
                const user = firebase.auth().currentUser;
                if (user) {
                    log(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.email}`, 'success');
                } else {
                    log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω', 'info');
                }
            } else {
                log('Auth Manager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
            }
        });
    </script>
</body>
</html> 