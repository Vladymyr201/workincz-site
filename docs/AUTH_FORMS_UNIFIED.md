# Унифицированные формы аутентификации с React Hook Form

## Обзор

В этом документе описаны унифицированные формы аутентификации, разработанные с использованием React Hook Form и Zod для валидации. Формы обеспечивают единый пользовательский опыт, расширенную валидацию и улучшенную обработку ошибок.

## Компоненты форм

### 1. SignInForm (Форма входа)

Компонент `signin-form-rhf.tsx` предоставляет форму входа с следующими возможностями:
- Валидация email и пароля с помощью Zod
- Показ/скрытие пароля
- Опция "Запомнить меня"
- Вход через Google
- Обработка ошибок аутентификации
- Переход к форме регистрации

### 2. SignUpForm (Форма регистрации)

Компонент `signup-form-rhf.tsx` предоставляет форму регистрации с следующими возможностями:
- Валидация всех полей с помощью Zod
- Проверка совпадения паролей
- Динамическое отображение полей в зависимости от выбранной роли
- Обязательное согласие с условиями использования
- Обработка ошибок регистрации
- Переход к форме входа

### 3. ResetPasswordForm (Форма сброса пароля)

Компонент `reset-password-form-rhf.tsx` предоставляет форму сброса пароля с следующими возможностями:
- Валидация email с помощью Zod
- Отображение успешной отправки инструкций
- Обработка ошибок сброса пароля
- Переход к форме входа

### 4. AuthForms (Контейнер форм)

Компонент `auth-forms.tsx` объединяет все формы в один компонент с возможностью переключения между ними:
- Переключение между формами входа, регистрации и сброса пароля
- Единый интерфейс для всех форм
- Обработка успешного завершения операции

## Страницы аутентификации

Созданы три страницы для аутентификации:
- `/auth/signin` - страница входа
- `/auth/signup` - страница регистрации
- `/auth/reset-password` - страница сброса пароля

Каждая страница проверяет состояние аутентификации пользователя и перенаправляет на дашборд, если пользователь уже авторизован.

## Схемы валидации

### Схема входа (loginSchema)
- email: обязательное поле, валидный email
- password: обязательное поле, минимум 6 символов
- rememberMe: опциональное булево значение

### Схема регистрации (signupSchema)
- email: обязательное поле, валидный email
- password: обязательное поле, минимум 6 символов
- confirmPassword: обязательное поле, должно совпадать с password
- firstName: обязательное поле, максимум 50 символов
- lastName: обязательное поле, максимум 50 символов
- role: одно из значений: "candidate", "employer", "agency"
- phone: опциональное поле
- company: опциональное поле, отображается только для работодателей и агентств
- position: опциональное поле, отображается только для работодателей и агентств
- agreeToTerms: обязательное булево значение, должно быть true

### Схема сброса пароля (resetPasswordSchema)
- email: обязательное поле, валидный email

## Интеграция с AuthContext

Все формы используют `useAuthContext` для взаимодействия с системой аутентификации:
- Вход: метод `login`
- Вход через Google: метод `loginWithGoogle`
- Регистрация: метод `register`
- Сброс пароля: метод `resetPassword`
- Отслеживание состояния: `authState`
- Очистка ошибок: метод `clearError`

## Стилизация

Формы используют компоненты UI из библиотеки Shadcn UI:
- Button: для кнопок действий
- Input: для полей ввода
- Иконки из библиотеки Lucide React

## Как использовать

Для использования форм аутентификации в приложении:

1. Импортируйте компонент `AuthForms` из `@/components/auth/auth-forms`
2. Укажите начальную форму через параметр `initialForm` ('signin', 'signup' или 'reset-password')
3. Передайте функцию обратного вызова `onSuccess` для обработки успешной аутентификации

```tsx
import { AuthForms } from '@/components/auth/auth-forms';

export default function MyAuthPage() {
  return (
    <div className="container">
      <AuthForms 
        initialForm="signin" 
        onSuccess={() => console.log('Успешная аутентификация')} 
      />
    </div>
  );
}
```

## Дальнейшие улучшения

Возможные улучшения форм аутентификации:
- Добавление дополнительных методов социальной аутентификации (Facebook, Apple)
- Реализация двухфакторной аутентификации
- Добавление возможности входа по номеру телефона
- Интеграция с reCAPTCHA для защиты от ботов
- Локализация форм для поддержки разных языков