# Настройка секретов для GitHub Actions

В этом файле перечислены все необходимые секреты для корректной работы GitHub Actions в репозитории.

## Секреты для резервного копирования Firestore

| Имя секрета | Описание | Обязательный |
|-------------|----------|--------------|
| `GCP_SA_KEY` | JSON ключ сервисного аккаунта Google Cloud Platform с необходимыми правами | Да |
| `GCP_PROJECT_ID` | ID проекта Google Cloud | Да |
| `GCS_BUCKET` | Имя бакета Google Cloud Storage для хранения бэкапов | Да |
| `GCP_SA_EMAIL` | Email сервисного аккаунта для проверки срока действия ключей | Нет |
| `BACKUP_ENCRYPTION_KEY` | Ключ шифрования для бэкапов | Нет |
| `SLACK_WEBHOOK_URL` | URL вебхука для отправки уведомлений в Slack | Нет |

## Секреты для деплоя Firebase

| Имя секрета | Описание | Обязательный |
|-------------|----------|--------------|
| `FIREBASE_TOKEN` | Токен для CI/CD, полученный через `firebase login:ci` | Да |
| `FIREBASE_PROJECT_ID` | ID проекта Firebase | Да |

## Секреты для CodeQL и проверки безопасности

| Имя секрета | Описание | Обязательный |
|-------------|----------|--------------|
| `GITHUB_TOKEN` | Автоматически создается GitHub | Да |

## Как настроить секреты

1. Перейдите в настройки репозитория: `Settings` -> `Secrets and variables` -> `Actions`
2. Нажмите `New repository secret`
3. Введите имя и значение секрета
4. Повторите для всех необходимых секретов

## Создание сервисного аккаунта Google Cloud

Для работы с Firestore Backup необходим сервисный аккаунт со следующими ролями:

- `roles/datastore.importExportAdmin` - для экспорта Firestore
- `roles/storage.objectAdmin` - для работы с бакетом Cloud Storage

### Шаги по созданию сервисного аккаунта:

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Выберите ваш проект
3. Перейдите в `IAM & Admin` -> `Service Accounts`
4. Нажмите `Create Service Account`
5. Укажите имя и описание сервисного аккаунта
6. Добавьте необходимые роли
7. Создайте и скачайте ключ в формате JSON
8. Добавьте содержимое JSON файла в секрет `GCP_SA_KEY`

## Проверка настройки

После добавления всех необходимых секретов вы можете запустить workflow вручную для проверки:

1. Перейдите в раздел `Actions`
2. Выберите нужный workflow, например `Firestore Backup`
3. Нажмите `Run workflow` -> `Run workflow`